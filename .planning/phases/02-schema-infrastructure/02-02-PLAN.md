---
phase: 02-schema-infrastructure
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - output/domains.md
  - output/skill/references/classtypeid_reference.md
  - output/skill/references/field_values.md
autonomous: true

must_haves:
  truths:
    - "domains.md groups every one of the 187 tables into a functional domain with a description of what that domain covers"
    - "A standalone ClassTypeID reference file exists with all 350+ entries organized by category, not embedded in a wiki dump"
    - "The ~25 most frequently used ClassTypeIDs are in a quick-reference section at the top of the ClassTypeID reference"
    - "field_values.md references the standalone ClassTypeID reference instead of maintaining its own incomplete subset"
  artifacts:
    - path: "output/domains.md"
      provides: "Table-to-domain classification for all 187 tables"
      contains: "187"
    - path: "output/skill/references/classtypeid_reference.md"
      provides: "Complete ClassTypeID lookup table (350+ entries)"
      contains: "Quick Reference"
    - path: "output/skill/references/field_values.md"
      provides: "Field value reference with pointer to ClassTypeID reference"
      contains: "classtypeid_reference.md"
  key_links:
    - from: "output/skill/references/classtypeid_reference.md"
      to: "output/wiki/extracts/database_integration_knowledge.md"
      via: "extracted and reorganized from Section 2"
      pattern: "ClassTypeID.*Object Type.*Database Table"
    - from: "output/skill/references/field_values.md"
      to: "output/skill/references/classtypeid_reference.md"
      via: "cross-reference pointer"
      pattern: "classtypeid_reference"
---

<objective>
Fix domain classification table count (CORE-05) and compile the ClassTypeID reference (CORE-06) into a standalone, skill-consumable document.

Purpose: domains.md says "181 active tables" but there are 187 schema files -- this text discrepancy needs correction. The ClassTypeID reference is the biggest gap in this phase: 356 entries exist in a wiki extract but only 8 are in the current skill's field_values.md. This plan extracts, organizes, and formats all 356 entries into a standalone reference file that any skill can consume.

Output: Corrected domains.md with accurate table count, a new `output/skill/references/classtypeid_reference.md` with all 350+ ClassTypeIDs organized by category, and an updated field_values.md that references the new file.
</objective>

<execution_context>
@/Users/cain/.claude/get-shit-done/workflows/execute-plan.md
@/Users/cain/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-schema-infrastructure/02-RESEARCH.md

Key source files:
@output/domains.md (needs table count correction)
@output/wiki/extracts/database_integration_knowledge.md (Section 2: ClassTypeID source data, 356 entries)
@output/skill/references/field_values.md (needs ClassTypeID section replaced with reference pointer)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix domains.md table count and verify all tables classified</name>
  <files>output/domains.md</files>
  <action>
    1. **Read domains.md** in full to understand current structure and content.

    2. **Fix the table count discrepancy**: The overview section says "181 active tables" but there are 187 schema files in `output/schemas/`. Determine the correct count:
       - List all files in `output/schemas/` and count them (should be 187)
       - Check if the discrepancy is due to underscore-prefixed lookup tables (_ArtworkBand, _ArtworkCollectionType, _ArtworkCommentType, _ArtworkLogType, _ArtworkPriority, _ArtworkRole, _ArtworkStatus, _Unit) being counted separately or the PrCA/Util dot-notation tables
       - Update the overview text to accurately state the total (e.g., "187 tables across 16 functional domains")
       - If some tables are intentionally uncounted (e.g., lookup tables), explain that clearly in the text

    3. **Verify all 187 tables appear somewhere in domains.md**: Cross-reference the list of schema filenames against the tables mentioned in domains.md. Any tables present in `output/schemas/` but NOT listed in any domain should be added to the appropriate domain (or to "Miscellaneous/Lookup" if no clear fit).
       - Remember: Schema files use underscores for dots (PrCA_Board_Data.md = PrCA.Board.Data table)
       - The 8 underscore-prefixed tables (_ArtworkBand, etc.) are lookup tables that should appear in Artwork & Proofing or Miscellaneous/Lookup

    4. **Do NOT restructure domains.md**: The existing 16-domain structure is good. Only fix the count text and add any missing table references. Do not reorganize domains, change descriptions, or reformat the file beyond the minimum needed.
  </action>
  <verify>
    The table count in domains.md overview matches the actual count of schema files. A quick cross-reference confirms no schema file is unaccounted for in domains.md.
  </verify>
  <done>
    domains.md overview accurately states the total table count (matching output/schemas/ file count). All 187 tables appear in at least one domain. CORE-05 verified and corrected.
  </done>
</task>

<task type="auto">
  <name>Task 2: Extract and compile standalone ClassTypeID reference</name>
  <files>
    output/skill/references/classtypeid_reference.md
    output/skill/references/field_values.md
  </files>
  <action>
    1. **Extract ClassTypeID data**: Read Section 2 ("ClassTypeID Mappings") from `output/wiki/extracts/database_integration_knowledge.md` (lines ~72-441). This contains the full table of 350+ ClassTypeID entries with columns: ClassTypeID, Object Type, System Data, Database Table. Also extract the "Frequently Used ClassTypeIDs" quick reference subsection (~24 entries).

    2. **Create standalone reference file** at `output/skill/references/classtypeid_reference.md` with this structure:

       ```markdown
       # ClassTypeID Reference

       Complete reference for all ClassTypeID values in the Control ERP database.
       ClassTypeID is a polymorphic type identifier used throughout Control to map
       object types to their database tables.

       Source: Cyrious Control wiki documentation (350+ entries verified)

       ---

       ## Quick Reference: Most Used ClassTypeIDs

       [The ~24 frequently used entries from the wiki extract, formatted as:]
       | ClassTypeID | What It Is | Database Table | Common Usage |
       [Include the entries from the wiki's "Frequently Used" section PLUS any additional
       high-value entries from MEMORY.md/CLAUDE.md:]
       - 2000: Company/Account
       - 3000: Contact
       - 3500: Employee
       - 10000: Transaction Header (Order/Estimate/PO)
       - 10100: Transaction Detail (Line Item)
       - 10200: Modifier (TransMod)
       - 10300: Part on Line Item (TransPart)
       - 10400: Variation (TransVariation)
       - 10500: Tax (TransTax)
       - 12000: Product (CustomerGoodsItem)
       - 12014: Part
       - 14030: Transaction Detail Parameter
       - 20050: Master Time Card
       - 20051: Detail Time Card
       - 26100: Station

       ## FLS Banners Specific Notes

       - GoodsItemClassTypeID on TransDetail: FLS uses 12000 for Product and 12014 for Part.
         The wiki also documents ClassTypeID 49 for "Product" -- this appears to be an older
         or alternative mapping. For FLS queries, use 12000.
       - TimeCard ClassTypeID: 20050 = clock in/out parent record, 20051 = station time detail

       ## Complete ClassTypeID Table

       [All 350+ entries from the wiki extract, organized into categories:]

       ### System & Configuration (ClassTypeID < 2000)
       [All entries with ID < 2000]

       ### Entities (ClassTypeID 2000-9999)
       [Accounts, contacts, employees, addresses, etc.]

       ### Transactions (ClassTypeID 10000-10999)
       [TransHeader, TransDetail, TransMod, TransPart, etc.]

       ### Vendor Transactions (ClassTypeID 11000-11999)
       [PO, vendor trans detail, etc.]

       ### Products & Pricing (ClassTypeID 12000-12999)
       [Product, part, pricing elements, etc.]

       ### Inventory & Shipping (ClassTypeID 12100-13999)
       [Inventory, shipping, reservations, etc.]

       ### Parameters & Variables (ClassTypeID 14000-14999)
       [TransDetailParam, variables, etc.]

       ### Payments & GL (ClassTypeID 15000-19999)
       [Payment accounts, GL accounts, etc.]

       ### Activities & Journal (ClassTypeID 20000-20999)
       [TimeCard, artwork, journal entries, etc.]

       ### Artwork & Proofing (ClassTypeID 21000-21999)
       [Artwork items, groups, proofs, etc.]

       ### Marketing & CRM (ClassTypeID 22000-22999)
       [Promotions, marketing lists, etc.]

       ### Rules & Automation (ClassTypeID 23000-23999)
       [Macros, rules, etc.]

       ### Payroll (ClassTypeID 24000-24999)
       [Payroll, PTO, tax tables, etc.]

       ### Reports & Security (ClassTypeID 25000-25999)
       [Reports, security templates, etc.]

       ### Production & Scheduling (ClassTypeID 26000-29999)
       [Stations, production boards, etc.]

       ### Education & Service (ClassTypeID 30000+)
       [Courses, contracts, dashboards, etc.]
       ```

       **Important formatting rules:**
       - Keep the same 4-column table format from the wiki (ClassTypeID, Object Type, System Data, Database Table)
       - In the Quick Reference section, add a 4th column "Common Usage" with a brief description of when you would encounter this ClassTypeID
       - Preserve ALL 350+ entries -- do not filter or omit "system" entries
       - Use the category ranges as approximate guides -- some IDs may not fit neatly; place them in the nearest logical category

    3. **Update field_values.md**: Read the current file, find any section that lists ClassTypeID values (it has ~8 entries currently). Replace that section with a pointer to the new reference:

       ```markdown
       ## ClassTypeID

       See **[ClassTypeID Reference](classtypeid_reference.md)** for the complete reference (350+ entries).

       Key ClassTypeIDs for common queries:
       - 2000 = Account (Company)
       - 10000 = TransHeader (Order/Estimate)
       - 10100 = TransDetail (Line Item)
       - 12000 = Product
       - 20050/20051 = TimeCard (Master/Detail)

       For the full mapping, always consult classtypeid_reference.md.
       ```

       Do NOT remove other sections of field_values.md (TransactionType, StatusID, etc.) -- those are correct and valuable. Only update the ClassTypeID portion.
  </action>
  <verify>
    - `output/skill/references/classtypeid_reference.md` exists and contains 350+ ClassTypeID entries
    - Quick reference section is present at the top with the ~25 most-used IDs
    - Categories are organized logically by ID range
    - `output/skill/references/field_values.md` references classtypeid_reference.md instead of maintaining its own incomplete subset
    - No data was lost from field_values.md (TransactionType, StatusID sections preserved)
  </verify>
  <done>
    Standalone ClassTypeID reference exists at `output/skill/references/classtypeid_reference.md` with all 350+ entries organized by category and a quick-reference section. field_values.md updated to reference the new file. CORE-06 complete. Single authoritative source for ClassTypeID data established.
  </done>
</task>

</tasks>

<verification>
- domains.md table count matches schema file count (187)
- All 187 tables appear in at least one domain in domains.md
- classtypeid_reference.md contains 350+ entries (count the table rows)
- classtypeid_reference.md has Quick Reference section with ~25 entries
- field_values.md references classtypeid_reference.md for ClassTypeID lookups
- field_values.md still contains TransactionType and StatusID sections (not accidentally removed)
</verification>

<success_criteria>
1. domains.md groups every table into a functional domain with accurate total count -- CORE-05 verified
2. ClassTypeID reference (350+ entries) exists in structured, skill-consumable format at output/skill/references/classtypeid_reference.md -- CORE-06 complete
3. Quick-reference section contains the ~25 most commonly used ClassTypeIDs
4. field_values.md defers to the new reference (no duplicate incomplete subset)
5. Single authoritative source for ClassTypeID data (scattered 3-place problem resolved)
</success_criteria>

<output>
After completion, create `.planning/phases/02-schema-infrastructure/02-02-SUMMARY.md`
</output>
