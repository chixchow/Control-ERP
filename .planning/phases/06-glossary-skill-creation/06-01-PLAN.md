---
phase: 06-glossary-skill-creation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - skills/control-erp-glossary/control-erp-glossary-SKILL.md
autonomous: true

must_haves:
  truths:
    - "A user saying 'find blanket orders' can be routed to the correct query pattern (Description LIKE '%Blanket%')"
    - "A user asking 'What is a SSLIP?' gets a clear plain-English answer with database relationship"
    - "A user asking 'what are SEG orders' gets routed to FP_ProductDescription = 'SEG' via control-erp-sales"
    - "Every DyeSub Print category (20 categories) has a glossary entry with aliases and DB pattern"
    - "Every non-DyeSub product group (6 groups) has a glossary entry with aliases and DB pattern"
    - "All 6 required Control technical terms (CHAPI, SSLIP, CFL, SQLBridge, ClassTypeID, GoodsItemClassTypeID) are defined with database relationships"
    - "The natural language routing table maps at least 20 common user phrases to the correct skill and query approach"
  artifacts:
    - path: "skills/control-erp-glossary/control-erp-glossary-SKILL.md"
      provides: "Complete glossary skill with FLS business terminology, Control technical terms, and routing table"
      contains: "name: control-erp-glossary"
  key_links:
    - from: "skills/control-erp-glossary/control-erp-glossary-SKILL.md"
      to: "skills/control-erp-sales/control-erp-sales-SKILL.md"
      via: "Cross-references for product queries"
      pattern: "control-erp-sales"
    - from: "skills/control-erp-glossary/control-erp-glossary-SKILL.md"
      to: "skills/control-erp-core/control-erp-core-SKILL.md"
      via: "Cross-references for business rules"
      pattern: "control-erp-core"
    - from: "skills/control-erp-glossary/control-erp-glossary-SKILL.md"
      to: "skills/control-erp-financial/control-erp-financial-SKILL.md"
      via: "Cross-references for GL/payment queries"
      pattern: "control-erp-financial"
---

<objective>
Create the control-erp-glossary skill that maps FLS Banners business language and Control ERP technical terminology to database entities, queries, and the correct skill to consult.

Purpose: Enable Claude to translate casual FLS business language ("find blanket orders," "SEG revenue," "what is a SSLIP?") into the correct database queries and route users to the right skill. This is the translation/routing layer that makes the other three skills accessible via natural language.

Output: `skills/control-erp-glossary/control-erp-glossary-SKILL.md` -- a single skill file with YAML frontmatter, 250-350 lines, containing product terminology, technical terminology, and a routing table.
</objective>

<execution_context>
@/Users/cain/.claude/get-shit-done/workflows/execute-plan.md
@/Users/cain/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-glossary-skill-creation/06-RESEARCH.md

Source files to read during execution:
@skills/control-erp-core/control-erp-core-SKILL.md
@skills/control-erp-sales/control-erp-sales-SKILL.md
@skills/control-erp-financial/control-erp-financial-SKILL.md
@output/wiki/extracts/database_integration_knowledge.md
@output/wiki/extracts/orders_accounting_knowledge.md
@output/wiki/extracts/cfl_formula_language_knowledge.md
@output/wiki/extracts/macros_automation_knowledge.md
@output/wiki/extracts/products_pricing_knowledge.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create glossary skill file with all terminology sections</name>
  <files>skills/control-erp-glossary/control-erp-glossary-SKILL.md</files>
  <action>
Read the three existing skills and the five wiki extracts listed in the context section above. Then create `skills/control-erp-glossary/control-erp-glossary-SKILL.md` with these sections:

**1. YAML Frontmatter (exact format):**
```yaml
---
name: control-erp-glossary
description: Maps FLS Banners business language and Control ERP technical terminology to database entities, queries, and the right skill to consult. Use when users reference FLS product names (blankets, SEG, Fab Frame, DyeLux, table throw, step and repeat), Control-specific terms (CHAPI, SSLIP, CFL, ClassTypeID), or when you need to route a question to the correct skill.
---
```

**2. Introduction** (5-10 lines): What this glossary does, when to use it, relationship to other skills. State clearly: this is a routing/translation tool, NOT a knowledge repository. For full query templates, always consult the skill referenced in each entry.

**3. FLS Product Line Terminology (GLOSS-02):**
Include ALL 20 DyeSub Print categories from the research inventory (Swing Flags, Feather Flags, Banners, SEG, Tear Drop Flags, Banner Stands, Fab Frames, Custom Flag, Golf Flag 14x20, Table Runner, Pillow Case Frames, Pop Up Banners, Backdrop, Golf Flag 5x8, By The Yard, Golf Cart Flag, Bell Covers, Swoopper Flags, Trombone cover, Printed Dyesub Paper).

Include ALL 6 non-DyeSub product groups (DyeLux Table Cover, Table Throw, Table Cover generic, Garments/Apparel, Tent/Pop-Up, Design/Artwork).

Include Container Product concept entries (Container product, DyeSub Print, FP_ProductDescription, FP_ProductID).

Each product entry format:
- **Business meaning:** 1 sentence describing what it is in plain English
- **Aliases:** Common alternative names FLS staff use
- **Product container:** DyeSub Print (via FP_ProductDescription) OR Non-DyeSub (standalone)
- **Database identification:** The WHERE clause or LIKE pattern to find it
- **Revenue queries:** Point to control-erp-sales (do NOT include dollar amounts or revenue figures)

Note the TC_ variable limitation for DyeLux Table Covers: TC_ variables (TC_FabricCategory, TC_ProductName) are NOT saved to TransDetailParam, so variable-based queries do not work for table covers.

**4. Control Technical Terminology (GLOSS-03):**
Include the 6 REQUIRED terms with full entries: CHAPI, SSLIP, CFL, SQLBridge, ClassTypeID, GoodsItemClassTypeID.

Include the ~25 ADDITIONAL important terms from the research inventory: SeqID, TransactionType, StatusID, SubTotalPrice, SaleDate, UDF, TransHeaderUserField, Macro, Variation, Pricing Plan, Pricing Level, Promotion, Station, Closeout, GL View, Ledger, Journal, Payment, Division, Container Product, FP_ Variables, Import_Order_Number, IsActive, History Tables, Polymorphic Pattern, CustomerGoodsItem, PricingElement, CRIX, Production Terminal, WebView.

Each technical term entry format:
- **What it is:** Plain-English definition (1-2 sentences)
- **Why it matters:** When/why a user would encounter this (1 sentence)
- **Database relationship:** Column name, table, or function reference
- **Detailed reference:** Point to the owning skill or wiki extract (do NOT duplicate full content)

For IsActive, include the CRITICAL warning: do NOT filter IsActive on TransDetailParam (Control sets IsActive=false after product config but data is still valid).

**5. Order Lifecycle and Workflow Terminology:**
Include the 15 order lifecycle terms from the research inventory (Estimate/Quote, Order/Sale, WIP, Built, Sale status, Closed, Voided, Converted, Lost, Pending, PO/Purchase Order, Bill, AR/Accounts Receivable, AP/Accounts Payable, P&L/Profit and Loss, COGS).

Each entry: term, meaning (1 sentence), and route to the owning skill.

**6. Natural Language Routing Table:**
A Markdown table with columns: User Says | Route To | Key Pattern/Section.
Include at least 25 routing entries covering:
- Product queries (blankets, SEG, feather flags, table covers, etc.)
- Revenue/sales queries (top customers, monthly sales, product breakdown)
- Technical questions (what is CHAPI, what is a ClassTypeID, etc.)
- Financial queries (AR aging, P&L, payments, GL)
- Order lifecycle questions (estimate status, order workflow, voided orders)
- Production/workflow questions (stations, artwork, macros)

**ANTI-PATTERNS TO AVOID:**
- Do NOT include dollar amounts, revenue figures, or order counts (these go stale; the sales skill owns them)
- Do NOT copy query templates from other skills (include only the identifying WHERE clause or LIKE pattern)
- Do NOT restate TransactionType or StatusID lookup tables (point to core skill)
- Do NOT exceed 10 lines per glossary entry (if longer, you are duplicating another skill)
- Target 250-350 lines total. If approaching 400+, you are over-including content.
  </action>
  <verify>
1. File exists at `skills/control-erp-glossary/control-erp-glossary-SKILL.md`
2. File starts with valid YAML frontmatter containing `name: control-erp-glossary`
3. Line count is between 200 and 400 lines: `wc -l skills/control-erp-glossary/control-erp-glossary-SKILL.md`
4. All 20 DyeSub Print categories appear: grep for "Swing Flags", "SEG", "Fab Frames", "Backdrop", "Bell Covers"
5. All 6 required Control terms appear: grep for "CHAPI", "SSLIP", "CFL", "SQLBridge", "ClassTypeID", "GoodsItemClassTypeID"
6. No dollar amounts or revenue figures appear: grep for `\$[0-9]` should return 0 matches
7. Cross-references to all three other skills appear: grep for "control-erp-core", "control-erp-sales", "control-erp-financial"
  </verify>
  <done>
A complete glossary skill file exists with:
- Valid YAML frontmatter (name + description)
- All 20 DyeSub Print category entries with aliases and DB patterns
- All 6 non-DyeSub product group entries with aliases and DB patterns
- Container product concept entries
- All 6 required Control technical terms with database relationships
- 25+ additional technical terms
- Order lifecycle terminology (15 terms)
- Natural language routing table (25+ entries)
- Cross-references to core, sales, and financial skills
- No duplicated revenue figures, query templates, or business rule tables
- Between 200-400 lines total
  </done>
</task>

<task type="auto">
  <name>Task 2: Validate glossary against all three GLOSS requirements</name>
  <files>skills/control-erp-glossary/control-erp-glossary-SKILL.md</files>
  <action>
After creating the glossary, run a systematic validation against each requirement:

**GLOSS-01 Validation (skill structure):**
- Confirm `skills/control-erp-glossary/` directory exists
- Confirm `control-erp-glossary-SKILL.md` has YAML frontmatter with `name` and `description` fields
- Confirm Claude can load it as a skill (valid Markdown, no syntax errors in frontmatter)

**GLOSS-02 Validation (FLS product terminology):**
- Grep for each of the 20 DyeSub Print category names to confirm they all appear
- Grep for each of the 6 non-DyeSub product groups
- Grep for "step and repeat" (must appear as alias for Backdrop)
- Grep for "blanket" (must appear as a product entry or alias)
- Grep for "Fab Frame" or "fab frame" (must appear)
- Grep for "DyeLux" or "dyelux" (must appear)
- Grep for "table throw" (must appear)
- Grep for "FP_ProductDescription" (must appear as the DyeSub Print routing mechanism)
- Confirm each product entry has a database identification pattern (WHERE clause or LIKE)

**GLOSS-03 Validation (Control technical terminology):**
- Grep for all 6 required terms: CHAPI, SSLIP, CFL, SQLBridge, ClassTypeID, GoodsItemClassTypeID
- For CHAPI: confirm the entry mentions HTTP endpoint, port 12556, and csf_chapi_* functions
- For SSLIP: confirm the entry mentions server process, recompute, Production Terminal
- For CFL: confirm the entry mentions formula language, PricingPlan, Variable formulas
- For ClassTypeID: confirm the entry mentions polymorphic type identifier and 350+ mappings
- For GoodsItemClassTypeID: confirm the entry mentions 12000=Product(catalog), 49=Product, 30=Part
- Grep for IsActive and confirm the TransDetailParam warning is present

If any validation fails, fix the glossary file before completing.
  </action>
  <verify>
Run all grep checks listed above. Every check must pass. Specifically:
1. `head -5 skills/control-erp-glossary/control-erp-glossary-SKILL.md` shows YAML frontmatter
2. `grep -c "FP_ProductDescription" skills/control-erp-glossary/control-erp-glossary-SKILL.md` returns >= 1
3. `grep -c "CHAPI" skills/control-erp-glossary/control-erp-glossary-SKILL.md` returns >= 2
4. `grep -c "step and repeat" skills/control-erp-glossary/control-erp-glossary-SKILL.md` returns >= 1
5. `grep -c "TransDetailParam" skills/control-erp-glossary/control-erp-glossary-SKILL.md` returns >= 1 (IsActive warning)
6. `grep -c '\$[0-9]' skills/control-erp-glossary/control-erp-glossary-SKILL.md` returns 0 (no dollar amounts)
  </verify>
  <done>
All three GLOSS requirements validated:
- GLOSS-01: Skill file exists in correct directory with valid YAML frontmatter
- GLOSS-02: All 20 DyeSub + 6 non-DyeSub product terms present with aliases and DB patterns; "find blanket orders" is routable
- GLOSS-03: All 6 required Control terms defined with database relationships; "What is a SSLIP?" answerable from glossary alone
  </done>
</task>

</tasks>

<verification>
1. `skills/control-erp-glossary/control-erp-glossary-SKILL.md` exists with valid YAML frontmatter
2. Line count between 200-400 (concise routing tool, not an encyclopedia)
3. All 20 DyeSub Print categories present with DB identification patterns
4. All 6 non-DyeSub product groups present with DB identification patterns
5. All 6 required Control technical terms (CHAPI, SSLIP, CFL, SQLBridge, ClassTypeID, GoodsItemClassTypeID) present with database relationships
6. Natural language routing table has 25+ entries
7. No dollar amounts or revenue figures in the file
8. Cross-references to all three sibling skills present
9. IsActive/TransDetailParam warning present
</verification>

<success_criteria>
Phase 6 is complete when:
- A user saying "find blanket orders" can be routed via the glossary to the correct Description LIKE pattern
- A user asking "What is a SSLIP?" gets a clear answer from the glossary with database relationship
- A user asking about any of the 26 FLS product terms gets mapped to the right query approach
- A user encountering any Control technical term can look it up and understand its database role
- The glossary contains zero duplicated query templates, revenue figures, or business rule tables
- All three GLOSS requirements pass validation
</success_criteria>

<output>
After completion, create `.planning/phases/06-glossary-skill-creation/06-01-SUMMARY.md`
</output>
