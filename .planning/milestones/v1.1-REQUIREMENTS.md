# Requirements Archive: v1.1 Read-Layer Build-Out

**Archived:** 2026-02-10
**Status:** SHIPPED

This is the archived requirements specification for v1.1.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

## v1.1 Requirements

Requirements for read-layer domain expansion. Each maps to roadmap phases.

### Financial Depth

- [x] **FIN-04**: AR aging report matching Control's built-in report (current, 30, 60, 90+ day buckets with customer breakdown) -- *Validated: 3 AR queries with SaleDate aging, customer breakdown, WIP/Built separation*
- [x] **FIN-05**: AP tracking and vendor payment queries (outstanding payables, vendor balances, payment history) -- *Validated: 3 AP queries with DueDate aging, vendor breakdown, ClassTypeID 20009 payment history*
- [x] **FIN-06**: P&L reporting with product-line breakdown (revenue, COGS, gross margin by product category) -- *Validated: 4 P&L queries (YoY, MoM, product-line revenue, aggregate COGS). COGS limitation documented.*
- [x] **FIN-07**: Cash flow and bank balance queries (current bank balances, cash in/out summary, payment forecast) -- *Validated: 4 cash flow queries (bank balance cumulative, undeposited funds, categorized cash flow, monthly time series). Payment forecast deferred to analytics milestone.*

### Customer Intelligence

- [x] **CUST-01**: Customer lookup, contact info, account status queries (search by name, view contacts, addresses, phone numbers, account flags) -- *Validated: 3-step smart search + executive profile + 4 drill-down queries*
- [x] **CUST-02**: Customer segmentation and CLV analysis (revenue ranking, order frequency, average order value, lifetime value calculation) -- *Validated: RFM segmentation with 7 named segments, Pareto analysis, revenue ranking with YoY*
- [x] **CUST-03**: Churn detection (customers inactive > N days, last order date, revenue at risk) -- *Validated: Personalized dormancy detection using AVG + 1.5x STDEV per customer, combined risk scoring*

### Inventory Management

- [x] **INV-01**: Parts and stock level queries (current quantities, parts by category, low stock identification) -- *Validated: 4 stock level queries with QuantityAvailable/OnHand, Inventory table ClassTypeID 12200*
- [x] **INV-02**: Reorder point monitoring and alerts (parts below reorder threshold, suggested reorder quantities) -- *Validated: Reorder alert with deficit sorting, 74/392 parts have reorder points configured*
- [x] **INV-03**: Warehouse and material planning queries (warehouse inventory, material consumption rates, usage history) -- *Validated: 6 purchasing queries (PRIMARY TIER), 4 consumption queries, GL-based valuation ($651K NodeID 10414)*

### Production Workflow

- [x] **PROD-01**: Artwork status and approval pipeline queries (artwork by status, pending approvals, proof history, turnaround time) -- *Validated: 8 artwork pipeline queries, stuck detection (7-day threshold), 22% revision rate*
- [x] **PROD-02**: Station workload and scheduling queries (jobs per station, station utilization, bottleneck identification) -- *Validated: Dual-level WIP (order + line-item), bottleneck detection with severity thresholds*
- [x] **PROD-03**: Station dwell time and process efficiency analysis (average dwell per station/stage, slow-stage identification, dwell by order size) -- *Validated: 5 dwell queries using LEAD() on Journal JournalActivityType=45, NOT TimeCard*

### Reports Catalog

- [x] **RPT-01**: Crystal Report catalog -- what exists, parameters, when to use vs. custom query (36 reports mapped to user intents, integrated into glossary routing) -- *Validated: 36 reports cataloged, 47% replaced/39% partial/14% uncovered, gap log created*

## Validation Standard

Every domain skill validated against Control's built-in reports before shipping. Same standard as v1.0 (99.98% accuracy baseline). Where no matching Control report exists, queries are internally consistent with validated core skill results (customer revenue totals match core revenue baseline $3,052,952.52).

## Traceability

| Requirement | Phase | Status | Outcome |
|-------------|-------|--------|---------|
| FIN-04 | Phase 9 | Complete | 3 AR queries, SaleDate aging |
| FIN-05 | Phase 9 | Complete | 3 AP queries, DueDate aging, ClassTypeID 20009 |
| FIN-06 | Phase 9 | Complete | 4 P&L queries, two-query COGS approach |
| FIN-07 | Phase 9 | Complete | 4 cash flow queries, payment forecast deferred |
| CUST-01 | Phase 10 | Complete | Smart search + executive profile + 4 drill-downs |
| CUST-02 | Phase 10 | Complete | RFM segmentation, Pareto analysis, ranking |
| CUST-03 | Phase 10 | Complete | Personalized dormancy, combined risk score |
| INV-01 | Phase 11 | Complete | 4 stock queries, two-tier confidence model |
| INV-02 | Phase 11 | Complete | Reorder alerts, 74/392 parts configured |
| INV-03 | Phase 11 | Complete | Purchasing + consumption + GL valuation |
| PROD-01 | Phase 12 | Complete | 8 artwork queries, stuck detection |
| PROD-02 | Phase 12 | Complete | Dual-level WIP, bottleneck severity |
| PROD-03 | Phase 12 | Complete | 5 dwell queries, LEAD() window function |
| RPT-01 | Phase 13 | Complete | 36 reports cataloged, 75 NL routing entries |

**Coverage:**
- v1.1 requirements: 14 total
- Shipped: 14
- Dropped: 0
- Adjusted: 1 (PROD-03 changed from "Time tracking and labor analysis" to "Station dwell time and process efficiency" after research showed FLS doesn't use TimeCard for per-job tracking)

## Milestone Summary

**Shipped:** 14 of 14 v1.1 requirements
**Adjusted:** PROD-03 scope refined from TimeCard-based labor analysis to Journal-based station dwell time (FLS doesn't use TimeCard for per-job tracking)
**Dropped:** None

---
*Archived: 2026-02-10 as part of v1.1 milestone completion*
